{"ast":null,"code":"var _jsxFileName = \"/Users/strawberrypompey/myspace/react/game/frontend/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport Board from './components/Board';\nimport PlayerInfo from './components/PlayerInfo';\nimport History from './components/History';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClickSquare = (pos, info) => {\n      if (info == null) {\n        const {\n          history\n        } = this.state;\n        const newHistory = [...history, {\n          stepCount: this.state.stepCount,\n          player: this.getCurrentPlayer(),\n          pos: pos\n        }];\n        this.setState({\n          history: newHistory,\n          stepCount: this.state.stepCount + 1,\n          squares: this.calcSquare(newHistory, this.state.stepCount + 1)\n        });\n      }\n    };\n\n    this.state = {\n      //棋盘上的棋子信息\n      squares: new Array(9).fill(null),\n      //步数\n      stepCount: 0,\n      //历史记录\n      history: []\n    };\n  }\n\n  getCurrentPlayer() {\n    const {\n      stepCount\n    } = this.state; //根据步数，判断奇偶，确定棋手\n\n    return stepCount % 2 === 0 ? \"X\" : \"O\";\n  }\n\n  calcSquare(history, stepCount) {\n    const newSquare = new Array(9).fill(null);\n\n    for (let i = 0; i < stepCount; i++) {\n      let curHistory = history[i];\n      newSquare[curHistory.pos] = curHistory.player;\n    }\n\n    return newSquare;\n  }\n\n  handleClickHistory(item) {\n    console.log(item);\n  }\n\n  render() {\n    const curPlayer = this.getCurrentPlayer();\n    const {\n      squares,\n      history\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"leftPanel\",\n        children: /*#__PURE__*/_jsxDEV(Board, {\n          squares: squares,\n          def: this.handleClickSquare\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rightPanel\",\n        children: [/*#__PURE__*/_jsxDEV(PlayerInfo, {\n          curPlayer: curPlayer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(History, {\n          history: history,\n          onClickHistory: this.handleClickHistory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","Component","Board","PlayerInfo","History","App","constructor","props","handleClickSquare","pos","info","history","state","newHistory","stepCount","player","getCurrentPlayer","setState","squares","calcSquare","Array","fill","newSquare","i","curHistory","handleClickHistory","item","console","log","render","curPlayer"],"sources":["/Users/strawberrypompey/myspace/react/game/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { Component } from 'react';\nimport Board from './components/Board';\nimport PlayerInfo from './components/PlayerInfo';\nimport History from './components/History';\n\nclass App extends Component {\n  constructor(props){\n    super(props)\n    this.state={\n      //棋盘上的棋子信息\n      squares : new Array(9).fill(null),\n      //步数\n      stepCount : 0,\n      //历史记录\n      history : []\n    }\n  }\n\ngetCurrentPlayer(){\n  const { stepCount } = this.state\n  //根据步数，判断奇偶，确定棋手\n  return stepCount%2 === 0 ? \"X\" : \"O\"\n}\n\nhandleClickSquare = (pos, info) => {\n  if(info == null){\n    const {history} = this.state;\n    const newHistory = [\n      ...history,\n      {\n        stepCount : this.state.stepCount,\n        player:this.getCurrentPlayer(),\n        pos:pos\n      }\n    ]\n\n    this.setState({\n      history : newHistory,\n      stepCount : this.state.stepCount + 1,\n      squares : this.calcSquare(newHistory, this.state.stepCount + 1)\n    })\n  }\n}\n\ncalcSquare(history, stepCount){\n  const newSquare = new Array(9).fill(null)\n    for(let i = 0; i < stepCount; i++ ){\n      let curHistory = history[i]\n      newSquare[curHistory.pos] = curHistory.player\n    }\n  return newSquare\n}\n\nhandleClickHistory(item){\n  console.log(item)\n}\n\n  render(){\n    const curPlayer = this.getCurrentPlayer();\n    const { squares,history } = this.state\n    return(\n      <div className='App'>\n        <div className='leftPanel'>\n          <Board squares={squares} def={this.handleClickSquare}/>\n        </div>\n        <div className='rightPanel'>\n          <PlayerInfo curPlayer={curPlayer}/>\n          <History history={history} onClickHistory={this.handleClickHistory}/>\n        </div>\n      </div>\n\n\n\n      )\n  }\n  \n}\n\nexport default App;\n"],"mappings":";AAAA,OAAO,WAAP;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,OAAP,MAAoB,sBAApB;;;AAEA,MAAMC,GAAN,SAAkBJ,SAAlB,CAA4B;EAC1BK,WAAW,CAACC,KAAD,EAAO;IAChB,MAAMA,KAAN;;IADgB,KAkBpBC,iBAlBoB,GAkBA,CAACC,GAAD,EAAMC,IAAN,KAAe;MACjC,IAAGA,IAAI,IAAI,IAAX,EAAgB;QACd,MAAM;UAACC;QAAD,IAAY,KAAKC,KAAvB;QACA,MAAMC,UAAU,GAAG,CACjB,GAAGF,OADc,EAEjB;UACEG,SAAS,EAAG,KAAKF,KAAL,CAAWE,SADzB;UAEEC,MAAM,EAAC,KAAKC,gBAAL,EAFT;UAGEP,GAAG,EAACA;QAHN,CAFiB,CAAnB;QASA,KAAKQ,QAAL,CAAc;UACZN,OAAO,EAAGE,UADE;UAEZC,SAAS,EAAG,KAAKF,KAAL,CAAWE,SAAX,GAAuB,CAFvB;UAGZI,OAAO,EAAG,KAAKC,UAAL,CAAgBN,UAAhB,EAA4B,KAAKD,KAAL,CAAWE,SAAX,GAAuB,CAAnD;QAHE,CAAd;MAKD;IACF,CApCmB;;IAEhB,KAAKF,KAAL,GAAW;MACT;MACAM,OAAO,EAAG,IAAIE,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,IAAlB,CAFD;MAGT;MACAP,SAAS,EAAG,CAJH;MAKT;MACAH,OAAO,EAAG;IAND,CAAX;EAQD;;EAEHK,gBAAgB,GAAE;IAChB,MAAM;MAAEF;IAAF,IAAgB,KAAKF,KAA3B,CADgB,CAEhB;;IACA,OAAOE,SAAS,GAAC,CAAV,KAAgB,CAAhB,GAAoB,GAApB,GAA0B,GAAjC;EACD;;EAsBDK,UAAU,CAACR,OAAD,EAAUG,SAAV,EAAoB;IAC5B,MAAMQ,SAAS,GAAG,IAAIF,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,IAAlB,CAAlB;;IACE,KAAI,IAAIE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGT,SAAnB,EAA8BS,CAAC,EAA/B,EAAmC;MACjC,IAAIC,UAAU,GAAGb,OAAO,CAACY,CAAD,CAAxB;MACAD,SAAS,CAACE,UAAU,CAACf,GAAZ,CAAT,GAA4Be,UAAU,CAACT,MAAvC;IACD;;IACH,OAAOO,SAAP;EACD;;EAEDG,kBAAkB,CAACC,IAAD,EAAM;IACtBC,OAAO,CAACC,GAAR,CAAYF,IAAZ;EACD;;EAECG,MAAM,GAAE;IACN,MAAMC,SAAS,GAAG,KAAKd,gBAAL,EAAlB;IACA,MAAM;MAAEE,OAAF;MAAUP;IAAV,IAAsB,KAAKC,KAAjC;IACA,oBACE;MAAK,SAAS,EAAC,KAAf;MAAA,wBACE;QAAK,SAAS,EAAC,WAAf;QAAA,uBACE,QAAC,KAAD;UAAO,OAAO,EAAEM,OAAhB;UAAyB,GAAG,EAAE,KAAKV;QAAnC;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAIE;QAAK,SAAS,EAAC,YAAf;QAAA,wBACE,QAAC,UAAD;UAAY,SAAS,EAAEsB;QAAvB;UAAA;UAAA;UAAA;QAAA,QADF,eAEE,QAAC,OAAD;UAAS,OAAO,EAAEnB,OAAlB;UAA2B,cAAc,EAAE,KAAKc;QAAhD;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAJF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAcD;;AArEyB;;AAyE5B,eAAepB,GAAf"},"metadata":{},"sourceType":"module"}