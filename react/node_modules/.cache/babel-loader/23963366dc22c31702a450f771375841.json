{"ast":null,"code":"var _jsxFileName = \"/Users/strawberrypompey/myspace/react/game/frontend/src/App.js\";\nimport \"./App.css\";\nimport React, { Component } from \"react\";\nimport Board from \"./components/Board/Board\";\nimport PlayerInfo from \"./components/Playerinfo/PlayerInfo\";\nimport History from \"./components/History/History\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      //棋盘上的棋子信息\n      squares: new Array(9).fill(null),\n      //步数\n      stepCount: 0,\n      //历史记录\n      history: []\n    };\n\n    this.handleClickSquare = (pos, info) => {\n      if (info === null) {\n        const {\n          history\n        } = this.state;\n        const newHistory = [...history, {\n          stepCount: this.state.stepCount,\n          player: this.getCurrentPlayer(),\n          pos: pos\n        }];\n        this.setState({\n          history: newHistory,\n          stepCount: this.state.stepCount + 1,\n          squares: this.calcSquare(newHistory, this.state.stepCount + 1)\n        });\n      }\n    };\n  }\n\n  getCurrentPlayer() {\n    const {\n      stepCount\n    } = this.state; //根据步数，判断奇偶，确定棋手\n\n    return stepCount % 2 === 0 ? \"X\" : \"O\";\n  }\n\n  calcSquare(history, stepCount) {\n    const newSquare = new Array(9).fill(null);\n\n    for (let i = 0; i < stepCount; i++) {\n      let curHistory = history[i];\n      newSquare[curHistory.pos] = curHistory.player;\n    }\n\n    return newSquare;\n  }\n\n  handleClickHistory(item) {\n    console.log(item);\n  }\n\n  render() {\n    const curPlayer = this.getCurrentPlayer();\n    const {\n      squares,\n      history\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"leftPanel\",\n        children: /*#__PURE__*/_jsxDEV(Board, {\n          squares: squares,\n          def: this.handleClickSquare\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rightPanel\",\n        children: [/*#__PURE__*/_jsxDEV(PlayerInfo, {\n          curPlayer: curPlayer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(History, {\n          history: history,\n          onClickHistory: this.handleClickHistory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","Component","Board","PlayerInfo","History","App","state","squares","Array","fill","stepCount","history","handleClickSquare","pos","info","newHistory","player","getCurrentPlayer","setState","calcSquare","newSquare","i","curHistory","handleClickHistory","item","console","log","render","curPlayer"],"sources":["/Users/strawberrypompey/myspace/react/game/frontend/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport React, { Component } from \"react\";\nimport Board from \"./components/Board/Board\";\nimport PlayerInfo from \"./components/Playerinfo/PlayerInfo\";\nimport History from \"./components/History/History\";\n\nclass App extends Component {\n  state = {\n    //棋盘上的棋子信息\n    squares: new Array(9).fill(null),\n    //步数\n    stepCount: 0,\n    //历史记录\n    history: [],\n  };\n\n  getCurrentPlayer() {\n    const { stepCount } = this.state;\n    //根据步数，判断奇偶，确定棋手\n    return stepCount % 2 === 0 ? \"X\" : \"O\";\n  }\n\n  handleClickSquare = (pos, info) => {\n    if (info === null) {\n      const { history } = this.state;\n      const newHistory = [\n        ...history,\n        {\n          stepCount: this.state.stepCount,\n          player: this.getCurrentPlayer(),\n          pos: pos,\n        },\n      ];\n\n      this.setState({\n        history: newHistory,\n        stepCount: this.state.stepCount + 1,\n        squares: this.calcSquare(newHistory, this.state.stepCount + 1),\n      });\n    }\n  };\n\n  calcSquare(history, stepCount) {\n    const newSquare = new Array(9).fill(null);\n    for (let i = 0; i < stepCount; i++) {\n      let curHistory = history[i];\n      newSquare[curHistory.pos] = curHistory.player;\n    }\n    return newSquare;\n  }\n\n  handleClickHistory(item) {\n    console.log(item);\n  }\n\n  render() {\n    const curPlayer = this.getCurrentPlayer();\n    const { squares, history } = this.state;\n    return (\n      <div className=\"App\">\n        <div className=\"leftPanel\">\n          <Board squares={squares} def={this.handleClickSquare} />\n        </div>\n        <div className=\"rightPanel\">\n          <PlayerInfo curPlayer={curPlayer} />\n          <History history={history} onClickHistory={this.handleClickHistory} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":";AAAA,OAAO,WAAP;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AACA,OAAOC,OAAP,MAAoB,8BAApB;;;AAEA,MAAMC,GAAN,SAAkBJ,SAAlB,CAA4B;EAAA;IAAA;IAAA,KAC1BK,KAD0B,GAClB;MACN;MACAC,OAAO,EAAE,IAAIC,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,IAAlB,CAFH;MAGN;MACAC,SAAS,EAAE,CAJL;MAKN;MACAC,OAAO,EAAE;IANH,CADkB;;IAAA,KAgB1BC,iBAhB0B,GAgBN,CAACC,GAAD,EAAMC,IAAN,KAAe;MACjC,IAAIA,IAAI,KAAK,IAAb,EAAmB;QACjB,MAAM;UAAEH;QAAF,IAAc,KAAKL,KAAzB;QACA,MAAMS,UAAU,GAAG,CACjB,GAAGJ,OADc,EAEjB;UACED,SAAS,EAAE,KAAKJ,KAAL,CAAWI,SADxB;UAEEM,MAAM,EAAE,KAAKC,gBAAL,EAFV;UAGEJ,GAAG,EAAEA;QAHP,CAFiB,CAAnB;QASA,KAAKK,QAAL,CAAc;UACZP,OAAO,EAAEI,UADG;UAEZL,SAAS,EAAE,KAAKJ,KAAL,CAAWI,SAAX,GAAuB,CAFtB;UAGZH,OAAO,EAAE,KAAKY,UAAL,CAAgBJ,UAAhB,EAA4B,KAAKT,KAAL,CAAWI,SAAX,GAAuB,CAAnD;QAHG,CAAd;MAKD;IACF,CAlCyB;EAAA;;EAU1BO,gBAAgB,GAAG;IACjB,MAAM;MAAEP;IAAF,IAAgB,KAAKJ,KAA3B,CADiB,CAEjB;;IACA,OAAOI,SAAS,GAAG,CAAZ,KAAkB,CAAlB,GAAsB,GAAtB,GAA4B,GAAnC;EACD;;EAsBDS,UAAU,CAACR,OAAD,EAAUD,SAAV,EAAqB;IAC7B,MAAMU,SAAS,GAAG,IAAIZ,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,IAAlB,CAAlB;;IACA,KAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,SAApB,EAA+BW,CAAC,EAAhC,EAAoC;MAClC,IAAIC,UAAU,GAAGX,OAAO,CAACU,CAAD,CAAxB;MACAD,SAAS,CAACE,UAAU,CAACT,GAAZ,CAAT,GAA4BS,UAAU,CAACN,MAAvC;IACD;;IACD,OAAOI,SAAP;EACD;;EAEDG,kBAAkB,CAACC,IAAD,EAAO;IACvBC,OAAO,CAACC,GAAR,CAAYF,IAAZ;EACD;;EAEDG,MAAM,GAAG;IACP,MAAMC,SAAS,GAAG,KAAKX,gBAAL,EAAlB;IACA,MAAM;MAAEV,OAAF;MAAWI;IAAX,IAAuB,KAAKL,KAAlC;IACA,oBACE;MAAK,SAAS,EAAC,KAAf;MAAA,wBACE;QAAK,SAAS,EAAC,WAAf;QAAA,uBACE,QAAC,KAAD;UAAO,OAAO,EAAEC,OAAhB;UAAyB,GAAG,EAAE,KAAKK;QAAnC;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAIE;QAAK,SAAS,EAAC,YAAf;QAAA,wBACE,QAAC,UAAD;UAAY,SAAS,EAAEgB;QAAvB;UAAA;UAAA;UAAA;QAAA,QADF,eAEE,QAAC,OAAD;UAAS,OAAO,EAAEjB,OAAlB;UAA2B,cAAc,EAAE,KAAKY;QAAhD;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAJF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAWD;;AA/DyB;;AAkE5B,eAAelB,GAAf"},"metadata":{},"sourceType":"module"}